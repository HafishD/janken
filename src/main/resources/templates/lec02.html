<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Janken Game</title>
</head>

<body>
  <p>
    <a href="/logout">ログアウト</a>
  </p>

  <script th:inline="javascript" th:if=${janken}>
    window.onload = function () {
      var janken = [[${ janken }]];
      var cpu_hand = janken.cpuHand;
      document.getElementById("cpu").innerHTML = cpu_hand;
      console.log(janken);
    }
  </script>

  <h1>Lec02 GET!</h1>
  <p>エントリー</p>
  <p th:if="${users}">
  <div th:each="user, stat:${users}">
    <tr>
      <td>Index:[[${stat.index}]]</td>
      <td>ID:[[${user.id}]]</td>
      <td>ユーザ名:[[${user.name}]]</td>
    </tr>
  </div>
  </p>
  <div th:if="${entry}">
    <ul>
      <li th:each="player : ${entry.players}">[[${player}]]</li>
    </ul>
  </div>
  <p>Hi
    <span sec:authentication="name"></span>
  </p>
  <p>
  <div>
    <a href="/lec02janken?hand=Gu">ぐー</a>
    <a href="/lec02janken?hand=Choki">ちょき</a>
    <a href="/lec02janken?hand=Pa">ぱー</a>
    <div th:if="${result}">
      あなたの手 [[${hand}]]<br>
      <div th:if="${janken}">相手の手 <span id="cpu"></span></div>
      結果 [[${result}]]
      <p th:if="${matches}">
      <div th:each="match, stat:${matches}">
        <tr>
          <td>Index:[[${stat.index}]]</td>
          <td>ID:[[${match.id}]]</td>
          <td>ユーザ1:[[${match.user1}]]</td>
          <td>ユーザ2:[[${match.user2}]]</td>
          <td>ユーザ1の手:[[${match.user1Hand}]]</td>
          <td>ユーザ2の手:[[${match.user2Hand}]]</td>
        </tr>
      </div>
      </p>
    </div>
  </div>
  </p>
</body>

</html>
